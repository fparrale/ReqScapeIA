<p-toast />
<p-confirmDialog />

@if (loading()) {
<p-skeleton height="300px" />
} @else {
<p-card>
  <p-table [value]="courses()" [paginator]="true" [rows]="10">
    <ng-template pTemplate="caption">
      <div class="flex align-items-center justify-content-between">
        <h2 class="m-0">Listado de Cursos</h2>
        <p-button
          icon="pi pi-plus"
          label="Nuevo"
          (onClick)="navigateToNewCourse()"
        />
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>Código</th>
        <th>Nombre</th>
        <th>Max. Intentos</th>
        <th>Items por intento</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-course>
      <tr>
        <td>{{ course.course_code }}</td>
        <td>{{ course.course_name }}</td>
        <td>{{ course.max_attempts }}</td>
        <td>{{ course.items_per_attempt }}</td>
        <td>
          <div class="flex gap-2">
            <p-button
              (onClick)="navigateToCourseStats(course.id)"
              type="button"
              icon="pi pi-chart-bar"
              severity="secondary"
              pTooltip="Ver estadísticas"
            ></p-button>
            <p-button
              (onClick)="navigateToRequirementsList(course.id)"
              type="button"
              icon="pi pi-list"
              severity="warning"
              pTooltip="Ver banco de requerimientos"
            ></p-button>
            <p-button
              type="button"
              severity="danger"
              icon="pi pi-trash"
              pTooltip="Eliminar curso"
              (onClick)="removeCourse(course.id)"
            ></p-button>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
}
